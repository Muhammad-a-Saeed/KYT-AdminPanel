(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{2382:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/manageFreeAttendance",function(){return s(3650)}])},7048:function(e,t,s){"use strict";var a=s(5893),l=s(1789),n=s(7294);t.Z=e=>{let{isEdit:t=!1,onActionSelect:s}=e,[r,i]=(0,n.useState)(!1),o=(0,n.useRef)(null),d=e=>{o.current&&!o.current.contains(e.target)&&i(!1)},c=()=>{i(!1)};(0,n.useEffect)(()=>(document.addEventListener("mousedown",d),window.addEventListener("scroll",c),()=>{document.removeEventListener("mousedown",d),window.removeEventListener("scroll",c)}),[]);let u=e=>{s&&s(e),i(!1)};return(0,a.jsxs)("div",{className:"relative w-full",ref:o,children:[(0,a.jsx)("button",{"aria-haspopup":"true","aria-expanded":r,onClick:()=>i(!r),className:"focus:outline-none",children:(0,a.jsx)(l.Jo,{})}),r&&(0,a.jsx)("div",{className:"shadow-dropDown w-28 bg-white absolute right-2 z-50 rounded-xl",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"hover:bg-table_row_hover rounded-t-xl px-5 whitespace-nowrap py-2 w-full text-left",onClick:()=>u("approved"),children:"Approved"}),(0,a.jsx)("button",{className:"hover:bg-table_row_hover px-5 py-2 w-full text-left",onClick:()=>u("rejected"),children:"Rejected"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"hover:bg-table_row_hover rounded-t-xl px-5 whitespace-nowrap py-2 w-full text-left",onClick:()=>u("Edit"),children:"Edit"}),(0,a.jsx)("button",{className:"text-danger rounded-b-xl hover:bg-table_row_hover px-5 py-2 w-full text-left",onClick:()=>u("Delete"),children:"Delete"})]})})]})}},7673:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(5893),l=s(7294),n=s(9521);let r=e=>{let{column:t}=e;return(0,a.jsx)("div",{children:t.canFilter&&t.render("Filter")})};var i=s(3866),o=s(1789),d=e=>{let{columns:t,data:s,customPageSizeOptions:d=[10,20,30,40,50],onRowClick:c,rowClick:u,isSelectDropdown:x=!0,isFilter:m=!0,isSortBy:h=!0,isShowPagination:p=!0,selectedRows:g,dataName:b="",nextPage:f,previousPage:v,setPageLimit:j,canPreviousPage:w,canNextPage:N,...y}=e,{getTableProps:S,getTableBodyProps:_,headerGroups:P,page:C,prepareRow:E,pageOptions:k,pageCount:F,gotoPage:I,setPageSize:A,state:{pageIndex:B,pageSize:Z}}=(0,n.useTable)({data:s,columns:t,initialState:{pageIndex:0,pageSize:i.IV,sortBy:h?[{desc:!0}]:[]}},n.useGlobalFilter,n.useFilters,n.useSortBy,n.useExpanded,n.usePagination),[z,R]=(0,l.useState)(""),G=e=>e.hideElement?"":e.isSorted?e.isSortedDesc?(0,a.jsx)(o.EM,{}):(0,a.jsx)(o.w,{}):(0,a.jsx)(o.KW,{}),T="1-".concat(Math.min((B+1)*Z,s.length)," of ").concat(s.length);return(0,a.jsxs)("div",{className:"bg-[#F8FAFC] rounded-2xl",children:[(0,a.jsxs)("div",{className:"flex rounded-t-xl justify-between bg-white items-center pt-4 md:pt-7 pb-4 px-4",children:[(0,a.jsxs)("div",{className:"text-sm text-heading md:min-h-[40px] font-medium",children:["All "," ".concat(b)," ( ",(0,a.jsx)("span",{className:"text-primary",children:s.length})," )"]}),!!g.length&&(0,a.jsxs)("div",{className:"flex items-center gap-x-3 text-heading text-sm font-medium",children:[(0,a.jsxs)("p",{children:[null==g?void 0:g.length," "," ".concat(b)," selected"]}),(0,a.jsx)("button",{className:"border py-1.5 px-[18px] rounded-lg text-danger border-border_color shadow-buttonShadow",children:"Delete"})]})]}),(0,a.jsxs)(l.Fragment,{children:[(0,a.jsxs)("div",{className:"table-responsive react-table bg-white  overflow-x-auto",children:[(0,a.jsxs)("table",{className:"table-auto w-full",...S(),children:[(0,a.jsx)("thead",{className:"bg-table_bg text-table_text",children:P.map(e=>(0,a.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map(e=>(0,a.jsxs)("th",{style:{width:"".concat(e.minSize,"%")},className:"px-4 md:min-w-[7rem] xl:min-w-full py-3.5 text-start text-sm font-semibold",children:[(0,a.jsxs)("div",{className:"flex gap-2 text-xs uppercase whitespace-nowrap items-center",...e.getSortByToggleProps(),children:[e.render("Header"),G(e)]}),m&&(0,a.jsx)(r,{column:e})]},e.id))},e.id))}),(0,a.jsx)("tbody",{children:C.map(e=>(E(e),(0,a.jsx)("tr",{className:"".concat(!!(null==g?void 0:g.find(t=>t===e.original.id))&&"!bg-table_bg"," cursor-pointer hover:bg-table_bg border border-t-table_row_hover"),onClick:()=>{u&&c(e)},children:e.cells.map(e=>(0,a.jsx)("td",{className:"px-4 py-3.5 text-xs whitespace-pre-wrap",children:e.render("Cell")},e.getCellProps().key))},e.getRowProps().key)))})]}),0===C.length&&(0,a.jsx)("p",{className:"min-h-[50vh] flex items-center justify-center",children:"No records found."})]}),(0,a.jsxs)("div",{className:"md:flex justify-end items-center gap-2 md:px-4 py-5",children:[(0,a.jsxs)("div",{className:"md:flex justify-between gap-3 items-center px-4",children:[(0,a.jsx)("div",{className:"md:block flex justify-end md:mb-0 mb-2",children:(0,a.jsx)("span",{className:"text-sm text-[#64748B]",children:T})}),(0,a.jsxs)("div",{className:"flex mb-2 md:mb-0 justify-end md:justify-normal items-center gap-2",children:[(0,a.jsx)("span",{className:"text-[#64748B] text-sm",children:"Rows per page:"}),(0,a.jsx)("select",{value:Z,onChange:e=>{A(Number(e.target.value)),j(Number(e.target.value))},className:"border px-2 outline-none py-1 rounded",children:d.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex px-4 md:px-0 justify-end md:justify-normal gap-3",children:[(0,a.jsxs)("button",{className:"".concat(w?"text-primary bg-white":"bg-disable text-disableText"," border font-medium flex items-center text-sm px-3 py-2 rounded-lg"),onClick:v,children:[(0,a.jsx)(o.fN,{customClass:"mr-1"}),"  Previous"]}),(0,a.jsxs)("button",{onClick:f,className:"".concat(N?"text-primary bg-white":"bg-disable text-disableText"," border font-medium flex items-center text-sm px-3 py-2 rounded-lg"),children:["Next ",(0,a.jsx)(o.WQ,{customClass:"ml-1"})]})]})]})]})]})}},6047:function(e,t,s){"use strict";s.d(t,{Q:function(){return i}});var a=s(5893),l=s(7294),n=s(1163),r=s(2760);function i(e){return function(t){let s=(0,n.useRouter)(),[i,o]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{let e=function(){let e=JSON.parse(localStorage.getItem("auth_user"));return!!e&&null!=e&&!!e.token||(localStorage.removeItem("auth_user"),!1)}();e||s.asPath===r.Z.SIGN_UP||s.asPath===r.Z.SIGN_IN?e&&"/"===s.asPath&&s.push("/dashboard"):s.push(s.asPath===r.Z.SIGN_UP?r.Z.SIGN_UP:r.Z.SIGN_IN),o(!0)},[s]),i)?(0,a.jsx)(e,{...t}):null}}},3650:function(e,t,s){"use strict";s.r(t);var a=s(5893),l=s(6474),n=s(7673),r=s(9881),i=s(6047),o=s(1789),d=s(5678),c=s(7294),u=s(7048),x=s(9470);t.default=(0,i.Q)(()=>{var e,t;let[s,i]=(0,c.useState)([]),[m,h]=(0,c.useState)(""),[p,g]=(0,c.useState)(!1),[b,f]=(0,c.useState)([]),[v,j]=(0,c.useState)(1),[w,N]=(0,c.useState)(10);console.log("selectedRows: ",b);let[y,S]=(0,c.useState)([]);(0,c.useEffect)(()=>{_()},[]);let _=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;g(!0);try{let s=JSON.parse(localStorage.getItem("auth_user")).token;console.log(s,"getToken");let a=await (0,x.kq)(s,e,t);a&&(i(null==a?void 0:a.freeAttendanceRequests),S(a))}catch(e){g(!1),console.log("error: ",e)}finally{g(!1)}},P=()=>{var e,t;(null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.hasNextPage)&&(console.log("123"),_(null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.totalPages,w),j(v+1))},C=()=>{var e,t;(null===(e=y.data)||void 0===e?void 0:e.hasPrevPage)&&(_((null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.totalPages)-1,w),j(v-1))},E=async(e,t)=>{console.log(e,"userId",t,"status");let s=JSON.parse(localStorage.getItem("auth_user")).token;g(!0),await (0,x._h)(s,{status:t},e).then(async e=>{d.Am.success(null==e?void 0:e.message),_(),g(!1)}).catch(e=>{g(!1),d.Am.error(e.message)})},k=(0,c.useMemo)(()=>[{Header:"Email",accessor:"requestedBy.email",disableFilters:!0,filterable:!1,Cell:e=>(0,a.jsxs)("div",{className:"flex items-center whitespace-nowrap text-secondary text-sm gap-2",children:[e.row.original.requestedBy.email," "]}),minSize:20},{Header:"Full Name",accessor:"requestedBy.fullName",disableFilters:!0,filterable:!1,Cell:e=>(0,a.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.requestedBy.fullName," "]}),minSize:20},{Header:"Type",accessor:"type",disableFilters:!0,filterable:!1,Cell:e=>(0,a.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.type," "]}),minSize:20},{Header:"Status",accessor:"status",disableFilters:!0,hideElement:!1,Cell:e=>{let t=e.row.original.status,s="",l="",n="";switch(t){case"approved":s="bg-successBg",l="text-success",n="Approved";break;case"rejected":s="bg-dangerBG",l="text-danger",n="Rejected";break;default:s="bg-yellow-200",l="text-yellow-600",n="Pending"}return(0,a.jsx)("p",{className:"".concat(s," ").concat(l," w-32 text-xs font-medium px-[14px] py-[6px] flex items-center justify-center rounded-full"),children:n})},minSize:30},{Header:"",accessor:"action",disableFilters:!0,hideElement:!0,canFilter:!1,Cell:e=>(0,a.jsx)(u.Z,{isEdit:!0,onActionSelect:t=>E(e.row.original._id,t)}),minSize:5}],[s]);return(0,a.jsxs)(r.Z,{onChange:e=>h(e.target.value),searchValue:m,children:[(0,a.jsx)(l.Z,{loading:p}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex text-[#4D515A] text-sm font-medium",children:["Dashboard ",(0,a.jsx)(o.Ev,{})," Manage Free Attendance"," ",(0,a.jsx)(o.Ev,{})]}),(0,a.jsx)("h1",{className:"text-2xl text-secondary font-bold my-3",children:"Manage Free Attendance"}),(0,a.jsx)("div",{className:"mb-5 mt-5 shadow-buttonShadow",children:(0,a.jsx)(n.Z,{currentItems:s,setCurrentItems:i,columns:k,data:s,isAddOptions:!1,customPageSize:6,selectedRows:b,dataName:"Manage Free Attendance",nextPage:()=>P(),previousPage:()=>C(),setPageLimit:e=>{_(1,e,()=>N(e))},canNextPage:null!=y&&null!==(e=y.data)&&void 0!==e&&!!e.hasNextPage,canPreviousPage:null!==(t=y.data)&&void 0!==t&&!!t.hasPrevPage})})]})]})})},3866:function(e,t,s){"use strict";s.d(t,{IV:function(){return a},Q5:function(){return l}});let a=10,l="/icons/profile.jpg"}},function(e){e.O(0,[143,664,521,162,231,888,774,179],function(){return e(e.s=2382)}),_N_E=e.O()}]);