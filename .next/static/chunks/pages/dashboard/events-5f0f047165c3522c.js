(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{763:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/events",function(){return i(8781)}])},1304:function(e,t,i){"use strict";var s=i(5893);i(7294),t.Z=e=>{let{label:t,placeholder:i,value:l,onChange:a,disabled:r,type:n,name:o}=e;return(0,s.jsxs)("div",{style:{display:"Flex",flexDirection:"column"},children:[(0,s.jsx)("label",{style:{color:"#5A5A5A",fontSize:"20px",fontWeight:500,marginBottom:"10px"},children:t}),(0,s.jsx)("input",{style:{width:"100%",height:"50px",backgroundColor:"white",border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A",paddingLeft:"20px",paddingRight:"20px"},placeholder:i,value:l,onChange:a,disabled:r,name:o,type:n})]})}},8781:function(e,t,i){"use strict";i.r(t);var s=i(5893),l=i(6474),a=i(7673),r=i(9881),n=i(6047);i(9414);var o=i(1304),d=i(1061),c=i(1e3),x=i(1789),u=i(5678),h=i(7294),p=i(6737),g=i.n(p);i(7590);var m=i(7048),v=i(9470),y=i(1163),f=i(381),b=i.n(f);t.default=(0,n.Q)(()=>{var e,t;let[i,n]=(0,h.useState)(!1),[p,f]=(0,h.useState)(""),[w,j]=(0,h.useState)(""),[S,C]=(0,h.useState)(""),[N,_]=(0,h.useState)(""),[E,A]=(0,h.useState)(""),[z,D]=(0,h.useState)(""),[k,F]=(0,h.useState)([]),[P,H]=(0,h.useState)(!1),[R,Z]=(0,h.useState)([]);console.log("selectedRows: ",R);let[M,I]=(0,h.useState)(1),[L,Y]=(0,h.useState)(10),[O,W]=(0,h.useState)([]),q=(0,y.useRouter)();(0,h.useEffect)(()=>{T()},[]);let T=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;H(!0);try{let i=JSON.parse(localStorage.getItem("auth_user")).token;console.log(i,"getToken");let s=await (0,v.BS)(i,p,w,z,S,N,E,e,t);s&&(F(null==s?void 0:s.events),W(s),n(!1))}catch(e){H(!1),console.log("error: ",e)}finally{H(!1)}},B=()=>{var e,t;(null==O?void 0:null===(e=O.data)||void 0===e?void 0:e.hasNextPage)&&(console.log("123"),T(null==O?void 0:null===(t=O.data)||void 0===t?void 0:t.totalPages,L),I(M+1))},J=()=>{var e,t;(null===(e=O.data)||void 0===e?void 0:e.hasPrevPage)&&(T((null==O?void 0:null===(t=O.data)||void 0===t?void 0:t.totalPages)-1,L),I(M-1))},U=async(e,t)=>{console.log("Received item:",e),console.log("Received status:",t),"Delete"===t?(H(!0),g()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this event!",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t)try{console.log("userId inside delete condition: ",e._id);let t=JSON.parse(localStorage.getItem("auth_user")),i=await (0,v._k)(null==t?void 0:t.token,null==e?void 0:e._id);(null==i?void 0:i.success)&&(T(),u.Am.success("Event deleted successfully!",{autoClose:2e3}))}catch(e){console.log("error: ",e)}finally{H(!1)}else H(!1)})):q.push({pathname:"addEvent",query:{item:JSON.stringify(e)}})},G=()=>{f(""),j(""),D(""),C(""),_(""),A(""),n(!1)};(0,h.useEffect)(()=>{""===p&&""===w&&""===z&&""===S&&""===N&&""===E&&T()},[p,w,z,S,N,E]);let X=(0,h.useMemo)(()=>[{Header:"Name",accessor:"name",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.name," "]}),minSize:20},{Header:"Description",accessor:"Description",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center whitespace-nowrap text-secondary text-sm gap-2",children:[e.row.original.description," "]}),minSize:20},{Header:"Start Date",accessor:"start_date",disableFilters:!0,filterable:!1,Cell:e=>{let t=b()(e.row.original.start_date).format("DD/MM/YYYY");return(0,s.jsxs)("div",{className:"flex items-center whitespace-nowrap text-secondary text-sm gap-2",children:[t," "]})},minSize:15},{Header:"End Date",accessor:"end_date",disableFilters:!0,filterable:!1,Cell:e=>{let t=b()(e.row.original.end_date).format("DD/MM/YYYY");return(0,s.jsxs)("div",{className:"flex items-center whitespace-nowrap text-secondary text-sm gap-2",children:[t," "]})},minSize:15},{Header:"Outfit",accessor:"outfit",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.outfit," "]}),minSize:20},{Header:"Ambiences",accessor:"ambiences",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsx)("div",{className:"flex items-center text-secondary text-sm gap-2",children:Array.isArray(e.row.original.ambiences)?e.row.original.ambiences.join(", "):e.row.original.ambiences}),minSize:20},{Header:"Music Genres",accessor:"music_genres",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsx)("div",{className:"flex items-center text-secondary text-sm gap-2",children:Array.isArray(e.row.original.music_genres)?e.row.original.music_genres.join(", "):e.row.original.music_genres}),minSize:20},{Header:"Country",accessor:"location.country",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.location.country," "]}),minSize:20},{Header:"City",accessor:"location.city",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.location.city," "]}),minSize:20},{Header:"Full Address",accessor:"location.full_address",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.location.full_address," "]}),minSize:20},{Header:"Event Url",accessor:"eventUrl",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.eventUrl," "]}),minSize:20},{Header:"Age",accessor:"age",disableFilters:!0,filterable:!1,Cell:e=>(0,s.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.age," "]}),minSize:20},{Header:"",accessor:"action",disableFilters:!0,hideElement:!0,canFilter:!1,Cell:e=>(0,s.jsx)(m.Z,{isEdit:!1,onActionSelect:t=>U(e.row.original,t)}),minSize:5}],[k]),Q=()=>{q.push("/dashboard/addEvent")},K=(e,t)=>{t(e.target.value)};return(0,s.jsxs)(r.Z,{children:[(0,s.jsx)(l.Z,{loading:P}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex text-[#4D515A] text-sm font-medium",children:["Dashboard ",(0,s.jsx)(x.Ev,{})," Events ",(0,s.jsx)(x.Ev,{})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[(0,s.jsx)("h1",{className:"text-2xl text-secondary font-bold my-3",children:"Events"}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("button",{className:"mt-4 mr-3 bg-secondary text-white font-bold py-2 px-4 rounded-md hover:bg-secondary-dark transition-colors",onClick:()=>Q(),children:"Add Event"}),(0,s.jsx)("button",{className:"bg-secondary text-white font-bold py-2 px-4 rounded-md hover:bg-secondary-dark transition-colors mb-4",onClick:()=>{n(!i)},children:i?"Hide Filters":"Show Filters"}),(0,s.jsxs)("div",{style:{display:i?"flex":"none",width:"280px",paddingLeft:"2%",paddingRight:"2%",flexDirection:"column",backgroundColor:"#24B1D9",position:"absolute",right:"10px",zIndex:1,padding:"10px",borderRadius:"10px",height:"300px",overflowY:"auto"},children:[(0,s.jsxs)("div",{style:{marginTop:"1%",width:"250px"},children:[(0,s.jsx)("p",{style:{color:"white",fontSize:"16px",fontWeight:500},children:"Music Genre"}),(0,s.jsx)("div",{style:{width:"100%",marginTop:"3%"},children:(0,s.jsx)(c.Z,{options:["all","electronica","comercial","regueton"],value:z,onChange:(e,t)=>D(t),renderInput:e=>(0,s.jsx)(d.Z,{...e,label:"Select multiple values",placeholder:"Select from dropdown",sx:{height:"50px","& .MuiInputBase-root":{height:"100%",backgroundColor:"white",border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A"},"& .MuiInputLabel-root":{}}}),sx:{width:"100%",height:"50px","& .MuiAutocomplete-paper":{border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A"}}})})]}),(0,s.jsxs)("div",{style:{width:"250px"},children:[(0,s.jsx)("p",{style:{color:"white",fontSize:"16px",fontWeight:500},children:"Latitude"}),(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(o.Z,{id:"latitude",name:"Latitude",type:"text",value:S,onChange:e=>C(e.target.value),required:!0,placeholder:"Enter Latitude"})})]}),(0,s.jsxs)("div",{style:{width:"250px"},children:[(0,s.jsx)("p",{style:{color:"white",fontSize:"16px",fontWeight:500},children:"Longitude"}),(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(o.Z,{id:"longitude",name:"longitude",type:"text",value:N,onChange:e=>_(e.target.value),required:!0,placeholder:"Enter Longitude"})})]}),(0,s.jsxs)("div",{style:{width:"250px"},children:[(0,s.jsx)("p",{style:{color:"white",fontSize:"16px",fontWeight:500},children:"Radius"}),(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(o.Z,{id:"radius",name:"Radius",type:"text",value:E,onChange:e=>A(e.target.value),required:!0,placeholder:"Enter Radius"})})]}),(0,s.jsxs)("div",{style:{width:"250px"},children:[(0,s.jsx)("p",{style:{color:"white",fontSize:"16px",fontWeight:500},children:"Start Date"}),(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(o.Z,{id:"Start Date",name:"Start Date",type:"date",value:p,onChange:e=>K(e,f),required:!0})})]}),(0,s.jsxs)("div",{style:{width:"250px"},children:[(0,s.jsx)("p",{style:{color:"white",fontSize:"16px",fontWeight:500},children:"End Date"}),(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(o.Z,{id:"End Date",name:"End Date",type:"date",value:w,onChange:e=>K(e,j),required:!0})})]}),(0,s.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"},children:[(0,s.jsx)("button",{className:"mt-4 bg-secondary text-white font-bold py-2 px-4 rounded-md hover:bg-secondary-dark transition-colors",onClick:()=>G(),children:"Clear filter"}),(0,s.jsx)("button",{className:"mt-4 bg-secondary text-white font-bold py-2 px-4 rounded-md hover:bg-secondary-dark transition-colors",onClick:()=>T(),children:"Add filter"})]})]})]})]}),(0,s.jsx)("div",{className:"mb-5 mt-5 shadow-buttonShadow",children:(0,s.jsx)(a.Z,{currentItems:k,setCurrentItems:F,columns:X,data:k,isAddOptions:!1,customPageSize:6,selectedRows:R,dataName:"Events",nextPage:()=>B(),previousPage:()=>J(),setPageLimit:e=>{T(1,e,()=>Y(e))},canNextPage:null!=O&&null!==(e=O.data)&&void 0!==e&&!!e.hasNextPage,canPreviousPage:null!==(t=O.data)&&void 0!==t&&!!t.hasPrevPage})})]})]})})}},function(e){e.O(0,[885,143,664,521,650,737,950,162,231,118,888,774,179],function(){return e(e.s=763)}),_N_E=e.O()}]);