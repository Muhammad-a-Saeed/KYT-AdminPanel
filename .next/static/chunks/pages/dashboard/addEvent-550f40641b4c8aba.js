(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{6636:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/addEvent",function(){return t(6457)}])},1304:function(e,l,t){"use strict";var o=t(5893);t(7294),l.Z=e=>{let{label:l,placeholder:t,value:a,onChange:n,disabled:i,type:r,name:d}=e;return(0,o.jsxs)("div",{style:{display:"Flex",flexDirection:"column"},children:[(0,o.jsx)("label",{style:{color:"#5A5A5A",fontSize:"20px",fontWeight:500,marginBottom:"10px"},children:l}),(0,o.jsx)("input",{style:{width:"100%",height:"50px",backgroundColor:"white",border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A",paddingLeft:"20px",paddingRight:"20px"},placeholder:t,value:a,onChange:n,disabled:i,name:d,type:r})]})}},6457:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return y}});var o=t(5893),a=t(7294),n=t(6474),i=t(1789),r=t(9881),d=t(1304),s=t(1061),u=t(1e3),c=t(9470),p=t(1163),m=t(5678),g=t(8591),v=t(381),h=t.n(v),x=t(8837),f=t(7054);function y(){let[e,l]=(0,a.useState)({}),[t,v]=(0,a.useState)(""),[y,b]=(0,a.useState)(""),[w,A]=(0,a.useState)(""),[j,_]=(0,a.useState)(""),[N,S]=(0,a.useState)(""),[E,C]=(0,a.useState)(""),[P,Z]=(0,a.useState)(""),[k,D]=(0,a.useState)(""),[L,R]=(0,a.useState)([]),[U,I]=(0,a.useState)([]),[q,M]=(0,a.useState)(!1),[O,z]=(0,a.useState)(null),[B,F]=(0,a.useState)(null),[T,Y]=(0,a.useState)({locationName:"",city:"",country:"",full_address:"",latitude:"",longitude:""}),W=(0,p.useRouter)(),{item:J}=W.query,H=(0,a.useRef)();(0,a.useEffect)(()=>{if(J){var e,t,o,a,n,i,r;let d=JSON.parse(J);l(d),v(null==d?void 0:d.name),b(null==d?void 0:d.description);let s=h()(null==d?void 0:d.start_date).format("YYYY-MM-DD"),u=h()(null==d?void 0:d.end_date).format("YYYY-MM-DD");A(s),_(u),S(null==d?void 0:d.outfit),R(null==d?void 0:d.ambiences),Y({locationName:null==d?void 0:null===(e=d.location)||void 0===e?void 0:e.name,city:null==d?void 0:null===(t=d.location)||void 0===t?void 0:t.city,country:null==d?void 0:null===(o=d.location)||void 0===o?void 0:o.country,full_address:null==d?void 0:null===(a=d.location)||void 0===a?void 0:a.full_address,latitude:null==d?void 0:null===(n=d.location)||void 0===n?void 0:n.latitude,longitude:null==d?void 0:null===(i=d.location)||void 0===i?void 0:i.longitude}),Z(null==d?void 0:null===(r=d.location)||void 0===r?void 0:r.full_address),I(null==d?void 0:d.music_genres),C(null==d?void 0:d.eventUrl),D(null==d?void 0:d.age),F(null==d?void 0:d.image_url),console.log(d,"parsedItem")}},[J]);let K=e=>{let{name:l,value:t}=e.target;Y(e=>({...e,[l]:t}))},V=e=>{z(e[0]),F(URL.createObjectURL(e[0]))},X=async()=>{console.log(T,"location state before submission");try{let u;if(0===Object.keys(e).length){if(""===t)m.Am.warn("Please enter  name");else if(""===y)m.Am.warn("Please enter description");else if(""===w)m.Am.warn("Please select start date");else if(""===j)m.Am.warn("Please select end date");else if(""===N)m.Am.warn("Please enter outfit");else if(L.length){if(U.length){if((null==T?void 0:T.locationName)==="")m.Am.warn("Please enter avenue name");else if(""===T.city)m.Am.warn("Please enter city");else if(""===T.country)m.Am.warn("Please enter country");else if(""===T.full_address)m.Am.warn("Please enter full address");else if(""===T.latitude)m.Am.warn("Please enter latitude");else if(""===T.longitude)m.Am.warn("Please enter longitude");else if(""!==E&&E.startsWith("https://")){if(""===k)m.Am.warn("Please enter age");else{M(!0),null!==O&&(u=await (0,g.Z)(O)),console.log(null==T?void 0:T.locationName,"location name");let e={name:t,outfit:N,description:y,start_date:w,end_date:j,image_url:u,ambiences:L,music_genres:U,location:{name:null==T?void 0:T.locationName,city:null==T?void 0:T.city,country:null==T?void 0:T.country,full_address:null==T?void 0:T.full_address,latitude:null==T?void 0:T.latitude,longitude:null==T?void 0:T.longitude},eventUrl:E,age:k},l=JSON.parse(localStorage.getItem("auth_user")).token;console.log(e,"body..."),await (0,c.vP)(l,e).then(async e=>{W.push("/dashboard/events"),m.Am.success(e.message),M(!1)}).catch(e=>{M(!1),console.log(e,"err..."),m.Am.error(e.message)})}}else m.Am.warn("Please enter a valid event URL starting with https://")}else m.Am.warn("Please enter music genres")}else m.Am.warn("Please enter ambience")}else{var l,o,a,n,i,r,d,s;M(!0),null!==O&&(u=await (0,g.Z)(O));let p={name:t||(null==e?void 0:e.name),outfit:N||(null==e?void 0:e.outfit),description:y||(null==e?void 0:e.description),start_date:w||(null==e?void 0:e.start_date),end_date:j||(null==e?void 0:e.end_date),image_url:null!==u?u:null==e?void 0:e.image_url,ambiences:L||(null==e?void 0:e.ambiences),music_genres:U||(null==e?void 0:e.music_genres),location:{name:(null==T?void 0:T.locationName)?null==T?void 0:T.locationName:null==e?void 0:null===(l=e.location)||void 0===l?void 0:l.name,address:(null==T?void 0:T.address)?null==T?void 0:T.address:null==e?void 0:null===(o=e.location)||void 0===o?void 0:o.address,city:(null==T?void 0:T.city)?null==T?void 0:T.city:null==e?void 0:null===(a=e.location)||void 0===a?void 0:a.city,country:(null==T?void 0:T.country)?null==T?void 0:T.country:null==e?void 0:null===(n=e.location)||void 0===n?void 0:n.country,full_address:(null==T?void 0:T.full_address)?null==T?void 0:T.full_address:null==e?void 0:null===(i=e.location)||void 0===i?void 0:i.full_address,latitude:(null==T?void 0:T.latitude)?null==T?void 0:T.latitude:null==e?void 0:null===(r=e.location)||void 0===r?void 0:r.latitude,longitude:(null==T?void 0:T.longitude)?null==T?void 0:T.longitude:null==e?void 0:null===(d=e.location)||void 0===d?void 0:d.longitude,timezone:(null==T?void 0:T.timezone)?null==T?void 0:T.timezone:null==e?void 0:null===(s=e.location)||void 0===s?void 0:s.timezone},eventUrl:E||(null==e?void 0:e.eventUrl),age:k||(null==e?void 0:e.age)};M(!0);let v=JSON.parse(localStorage.getItem("auth_user"));await (0,c.PG)(null==v?void 0:v.token,p,null==e?void 0:e._id).then(async e=>{W.push("/dashboard/events"),m.Am.success(null==e?void 0:e.message),M(!1)}).catch(e=>{M(!1),m.Am.error(e.message)})}}catch(e){m.Am.error(e.message)}},G=(e,l)=>{l(e.target.value)},Q=async e=>{console.log(e,"Address"),Z(e);try{let l=await (0,x.NU)(e);if(console.log(l,"results"),0===l.length)throw Error("No results found for the address.");let{lat:t,lng:o}=await (0,x.WV)(l[0]);console.log(t,"lat"),console.log(o,"lng");let a=l[0].place_id;new google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:a},(l,a)=>{if(a===google.maps.places.PlacesServiceStatus.OK){let a=l.address_components.find(e=>e.types.includes("locality")),n=l.address_components.find(e=>e.types.includes("country")),i=a?a.long_name:"City not found",r=n?n.long_name:"Country not found";console.log(i,"City"),console.log(r,"Country"),Y({full_address:e,latitude:t,longitude:o,city:i,country:r,locationName:null==T?void 0:T.locationName})}else console.error("Error fetching place details:",a)})}catch(e){console.error("Error processing address:",e)}},{isLoaded:$,loadError:ee}=(0,f.Db)({googleMapsApiKey:"1234567890abcdef1234567890abcdef",libraries:["places"]});return ee?(0,o.jsx)("div",{children:"Error loading maps"}):$?(0,o.jsxs)(r.Z,{children:[(0,o.jsx)(n.Z,{loading:q}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex text-gray-600 text-sm font-medium",children:["Dashboard ",(0,o.jsx)(i.Ev,{})," Events ",(0,o.jsx)(i.Ev,{})]}),(0,o.jsx)("h1",{className:"text-2xl text-secondary font-bold my-3",children:"Add Event"}),(0,o.jsxs)("div",{className:"mb-5 mt-5 shadow-lg p-4 bg-white rounded-md",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2 p-5",children:[(0,o.jsx)(d.Z,{id:"name",name:"name",type:"text",label:"Name",placeholder:"Enter Name",value:t,onChange:e=>v(e.target.value),required:!0,className:"w-full"}),(0,o.jsx)(d.Z,{id:"Description",name:"Description",type:"text",label:"Description",placeholder:"Enter Description",value:y,onChange:e=>b(e.target.value),required:!0,className:"w-full"}),(0,o.jsx)(d.Z,{id:"Start Date",name:"Start Date",type:"date",label:"Start Date",value:w,onChange:e=>G(e,A),required:!0,className:"w-full"}),(0,o.jsx)(d.Z,{id:"End Date",name:"End Date",type:"date",label:"End Date",value:j,onChange:e=>G(e,_),required:!0,className:"w-full"}),(0,o.jsx)(d.Z,{id:"OutFit",name:"OutFit",type:"text",label:"OutFit",placeholder:"Enter OutFit",value:N,onChange:e=>S(e.target.value),required:!0,className:"w-full"}),(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("p",{style:{color:"#5A5A5A",fontSize:"20px",fontWeight:500,marginBottom:"8px"},children:"Ambience"}),(0,o.jsx)(u.Z,{multiple:!0,freeSolo:!0,options:[],value:L,onChange:(e,l)=>R(l),renderInput:e=>(0,o.jsx)(s.Z,{...e,label:"Enter multiple values",placeholder:"Type and press Enter",sx:{height:"50px","& .MuiInputBase-root":{height:"100%",backgroundColor:"white",border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A"},"& .MuiInputLabel-root":{}}}),sx:{width:"100%",height:"50px","& .MuiAutocomplete-paper":{border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A"}}})]}),(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("p",{style:{color:"#5A5A5A",fontSize:"20px",fontWeight:500,marginBottom:"8px"},children:"Music Generes"}),(0,o.jsx)(u.Z,{multiple:!0,options:["urban","hardcore","pop","rock","remember","techno","house","edm","trap","reggaeton","latin","salsa","bachata","kizomba","r&b","dance","indie","afrobeat","minimal","underground","tech-house","drum-and-bass","acid-house","chill","hard-techno","melodic-techno","hip-hop","reggae","disco","sing-along","acoustic","trance","classical","soul","blues","jazz","metal","old-school","garage"],value:U,onChange:(e,l)=>I(l),renderInput:e=>(0,o.jsx)(s.Z,{...e,label:"Select multiple values",placeholder:"Select from dropdown",sx:{height:"50px","& .MuiInputBase-root":{height:"100%",backgroundColor:"white",border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A"},"& .MuiInputLabel-root":{}}}),sx:{width:"100%",height:"50px","& .MuiAutocomplete-paper":{border:"1px solid #0000001A",borderRadius:"5px",boxShadow:"0px 0px 5px 0px #0000001A"}}})]}),(0,o.jsx)(d.Z,{id:"avenue name",name:"locationName",type:"text",label:"Avenue Name",value:T.locationName,onChange:K,required:!0,className:"w-full",placeholder:"Enter avenue name"}),(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("p",{style:{color:"#5A5A5A",fontSize:"20px",fontWeight:500,marginBottom:"8px"},children:"Full Address"}),(0,o.jsx)(x.ZP,{value:P,onChange:Q,onSelect:Q,children:e=>{let{getInputProps:l,suggestions:t,getSuggestionItemProps:a,loading:n}=e;return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,o.jsx)("input",{style:{width:"100%",height:"50px",borderRadius:"5px",background:"white",paddingLeft:"20px",boxShadow:"0px 0px 5px 0px #0000001A",border:"1px solid #0000001A"},...l({placeholder:"Enter Address",className:"location-search-input"})}),(0,o.jsxs)("div",{className:"autocomplete-dropdown-container",children:[n&&(0,o.jsx)("div",{children:"Loading..."}),t.map(e=>{let l=e.active?"suggestion-item--active":"suggestion-item",t=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return(0,o.jsx)("div",{...a(e,{className:l,style:t}),children:(0,o.jsx)("span",{children:e.description})})})]})]})}})]}),(0,o.jsx)(d.Z,{id:"City",name:"city",type:"text",label:"City",value:T.city,onChange:K,required:!0,className:"w-full",placeholder:"Enter city"}),(0,o.jsx)(d.Z,{id:"Country",name:"country",type:"text",label:"Country",value:T.country,onChange:K,required:!0,className:"w-full",placeholder:"Enter country"}),(0,o.jsx)(d.Z,{id:"Latitude",name:"latitude",type:"text",label:"Latitude",value:T.latitude,onChange:K,required:!0,className:"w-full",placeholder:"Enter latitude"}),(0,o.jsx)(d.Z,{id:"Longitude",name:"longitude",type:"text",label:"Longitude",value:T.longitude,onChange:K,required:!0,className:"w-full",placeholder:"Enter Longitude"}),(0,o.jsx)(d.Z,{id:"Event Url",name:"Event Url",type:"text",label:"Event Url",value:E,onChange:e=>C(e.target.value),required:!0,className:"w-full",placeholder:"Enter event url"}),(0,o.jsx)(d.Z,{id:"Age",name:"Age",type:"number",label:"Age",value:k,onChange:e=>D(e.target.value),required:!0,className:"w-full",placeholder:"Enter age"}),(0,o.jsxs)("div",{style:{marginTop:"15px",position:"relative",flexDirection:"row",display:"flex",alignItems:"center"},children:[(0,o.jsx)("input",{type:"file",onChange:e=>V(e.target.files),hidden:!0,accept:".doc, .docx, .pdf, .png, .jpg, .jpeg,",ref:H}),(0,o.jsx)("img",{style:{width:"6rem",height:"6rem",cursor:"pointer",borderRadius:"10rem"},src:B||"/icons/profile.jpg",onClick:()=>H.current.click()}),(0,o.jsx)("div",{style:{marginLeft:"20px"},children:(0,o.jsx)("button",{onClick:()=>H.current.click(),style:{width:"130px",height:"40px",backgroundColor:"black",borderRadius:"10px",color:"white"},children:"Select Image"})})]})]}),(0,o.jsx)("div",{className:"flex justify-end mt-4",children:(0,o.jsx)("button",{type:"submit",className:"btn-primary px-4 py-2 bg-secondary text-white rounded-md",onClick:X,children:J?" Update":" Submit"})})]})]})]}):(0,o.jsx)("div",{children:"Loading..."})}},8591:function(e,l,t){"use strict";t.d(l,{Z:function(){return r}});var o=t(6650);let a=(0,t(3977).ZF)({apiKey:"AIzaSyC2BSPa-7N2TVHeXVF8qgbePgsTTSRdCwU",authDomain:"mamvo-ece7c.firebaseapp.com",projectId:"mamvo-ece7c",storageBucket:"mamvo-ece7c.appspot.com",messagingSenderId:"92973546222",appId:"1:92973546222:web:93e73f0bf3e62cda4d51ff"}),n=(0,o.cF)(a);var i=t(5678),r=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat("HALALManagement","/thumbnail"),t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Date().toISOString();try{let d=(0,o.iH)(n,"".concat(l,"/").concat(r)),s=(0,o.B0)(d,e);return s.on("state_changed",e=>{let l=Math.round(e.bytesTransferred/e.totalBytes*100);console.log("progress: ",l),t&&t(l),a&&a({total:e.totalBytes,uploaded:e.bytesTransferred})},e=>{console.error("Upload error:",e),i.Am.error("Error uploading file.")},async()=>{try{let e=await (0,o.Jt)(s.snapshot.ref);return console.log("File uploaded successfully:",e),e}catch(e){throw console.error("Error getting download URL:",e),i.Am.error("Error getting download URL."),e}}),new Promise((e,l)=>{s.on("state_changed",null,l,async()=>{try{let l=await (0,o.Jt)(s.snapshot.ref);e(l)}catch(e){l(e)}})})}catch(e){throw console.error("Upload error:",e),i.Am.error("Error uploading file."),e}}}},function(e){e.O(0,[885,255,143,664,650,950,245,162,231,888,774,179],function(){return e(e.s=6636)}),_N_E=e.O()}]);