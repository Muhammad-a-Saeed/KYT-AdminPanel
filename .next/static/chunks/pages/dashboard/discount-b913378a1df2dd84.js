(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{7297:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/discount",function(){return s(4560)}])},7048:function(e,t,s){"use strict";var l=s(5893),a=s(1789),n=s(7294);t.Z=e=>{let{isEdit:t=!1,onActionSelect:s}=e,[r,i]=(0,n.useState)(!1),o=(0,n.useRef)(null),d=e=>{o.current&&!o.current.contains(e.target)&&i(!1)},c=()=>{i(!1)};(0,n.useEffect)(()=>(document.addEventListener("mousedown",d),window.addEventListener("scroll",c),()=>{document.removeEventListener("mousedown",d),window.removeEventListener("scroll",c)}),[]);let u=e=>{s&&s(e),i(!1)};return(0,l.jsxs)("div",{className:"relative w-full",ref:o,children:[(0,l.jsx)("button",{"aria-haspopup":"true","aria-expanded":r,onClick:()=>i(!r),className:"focus:outline-none",children:(0,l.jsx)(a.Jo,{})}),r&&(0,l.jsx)("div",{className:"shadow-dropDown w-28 bg-white absolute right-2 z-50 rounded-xl",children:t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"hover:bg-table_row_hover rounded-t-xl px-5 whitespace-nowrap py-2 w-full text-left",onClick:()=>u("approved"),children:"Approved"}),(0,l.jsx)("button",{className:"hover:bg-table_row_hover px-5 py-2 w-full text-left",onClick:()=>u("rejected"),children:"Rejected"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"hover:bg-table_row_hover rounded-t-xl px-5 whitespace-nowrap py-2 w-full text-left",onClick:()=>u("Edit"),children:"Edit"}),(0,l.jsx)("button",{className:"text-danger rounded-b-xl hover:bg-table_row_hover px-5 py-2 w-full text-left",onClick:()=>u("Delete"),children:"Delete"})]})})]})}},7673:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var l=s(5893),a=s(7294),n=s(9521);let r=e=>{let{column:t}=e;return(0,l.jsx)("div",{children:t.canFilter&&t.render("Filter")})};var i=s(3866),o=s(1789),d=e=>{let{columns:t,data:s,customPageSizeOptions:d=[10,20,30,40,50],onRowClick:c,rowClick:u,isSelectDropdown:x=!0,isFilter:m=!0,isSortBy:h=!0,isShowPagination:g=!0,selectedRows:p,dataName:b="",nextPage:f,previousPage:v,setPageLimit:j,canPreviousPage:w,canNextPage:N,...y}=e,{getTableProps:S,getTableBodyProps:_,headerGroups:C,page:P,prepareRow:k,pageOptions:E,pageCount:F,gotoPage:D,setPageSize:I,state:{pageIndex:R,pageSize:z}}=(0,n.useTable)({data:s,columns:t,initialState:{pageIndex:0,pageSize:i.IV,sortBy:h?[{desc:!0}]:[]}},n.useGlobalFilter,n.useFilters,n.useSortBy,n.useExpanded,n.usePagination),[Z,H]=(0,a.useState)(""),O=e=>e.hideElement?"":e.isSorted?e.isSortedDesc?(0,l.jsx)(o.EM,{}):(0,l.jsx)(o.w,{}):(0,l.jsx)(o.KW,{}),A="1-".concat(Math.min((R+1)*z,s.length)," of ").concat(s.length);return(0,l.jsxs)("div",{className:"bg-[#F8FAFC] rounded-2xl",children:[(0,l.jsxs)("div",{className:"flex rounded-t-xl justify-between bg-white items-center pt-4 md:pt-7 pb-4 px-4",children:[(0,l.jsxs)("div",{className:"text-sm text-heading md:min-h-[40px] font-medium",children:["All "," ".concat(b)," ( ",(0,l.jsx)("span",{className:"text-primary",children:s.length})," )"]}),!!p.length&&(0,l.jsxs)("div",{className:"flex items-center gap-x-3 text-heading text-sm font-medium",children:[(0,l.jsxs)("p",{children:[null==p?void 0:p.length," "," ".concat(b)," selected"]}),(0,l.jsx)("button",{className:"border py-1.5 px-[18px] rounded-lg text-danger border-border_color shadow-buttonShadow",children:"Delete"})]})]}),(0,l.jsxs)(a.Fragment,{children:[(0,l.jsxs)("div",{className:"table-responsive react-table bg-white  overflow-x-auto",children:[(0,l.jsxs)("table",{className:"table-auto w-full",...S(),children:[(0,l.jsx)("thead",{className:"bg-table_bg text-table_text",children:C.map(e=>(0,l.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map(e=>(0,l.jsxs)("th",{style:{width:"".concat(e.minSize,"%")},className:"px-4 md:min-w-[7rem] xl:min-w-full py-3.5 text-start text-sm font-semibold",children:[(0,l.jsxs)("div",{className:"flex gap-2 text-xs uppercase whitespace-nowrap items-center",...e.getSortByToggleProps(),children:[e.render("Header"),O(e)]}),m&&(0,l.jsx)(r,{column:e})]},e.id))},e.id))}),(0,l.jsx)("tbody",{children:P.map(e=>(k(e),(0,l.jsx)("tr",{className:"".concat(!!(null==p?void 0:p.find(t=>t===e.original.id))&&"!bg-table_bg"," cursor-pointer hover:bg-table_bg border border-t-table_row_hover"),onClick:()=>{u&&c(e)},children:e.cells.map(e=>(0,l.jsx)("td",{className:"px-4 py-3.5 text-xs whitespace-pre-wrap",children:e.render("Cell")},e.getCellProps().key))},e.getRowProps().key)))})]}),0===P.length&&(0,l.jsx)("p",{className:"min-h-[50vh] flex items-center justify-center",children:"No records found."})]}),(0,l.jsxs)("div",{className:"md:flex justify-end items-center gap-2 md:px-4 py-5",children:[(0,l.jsxs)("div",{className:"md:flex justify-between gap-3 items-center px-4",children:[(0,l.jsx)("div",{className:"md:block flex justify-end md:mb-0 mb-2",children:(0,l.jsx)("span",{className:"text-sm text-[#64748B]",children:A})}),(0,l.jsxs)("div",{className:"flex mb-2 md:mb-0 justify-end md:justify-normal items-center gap-2",children:[(0,l.jsx)("span",{className:"text-[#64748B] text-sm",children:"Rows per page:"}),(0,l.jsx)("select",{value:z,onChange:e=>{I(Number(e.target.value)),j(Number(e.target.value))},className:"border px-2 outline-none py-1 rounded",children:d.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{className:"flex px-4 md:px-0 justify-end md:justify-normal gap-3",children:[(0,l.jsxs)("button",{className:"".concat(w?"text-primary bg-white":"bg-disable text-disableText"," border font-medium flex items-center text-sm px-3 py-2 rounded-lg"),onClick:v,children:[(0,l.jsx)(o.fN,{customClass:"mr-1"}),"  Previous"]}),(0,l.jsxs)("button",{onClick:f,className:"".concat(N?"text-primary bg-white":"bg-disable text-disableText"," border font-medium flex items-center text-sm px-3 py-2 rounded-lg"),children:["Next ",(0,l.jsx)(o.WQ,{customClass:"ml-1"})]})]})]})]})]})}},6047:function(e,t,s){"use strict";s.d(t,{Q:function(){return i}});var l=s(5893),a=s(7294),n=s(1163),r=s(2760);function i(e){return function(t){let s=(0,n.useRouter)(),[i,o]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=function(){let e=JSON.parse(localStorage.getItem("auth_user"));return!!e&&null!=e&&!!e.token||(localStorage.removeItem("auth_user"),!1)}();e||s.asPath===r.Z.SIGN_UP||s.asPath===r.Z.SIGN_IN?e&&"/"===s.asPath&&s.push("/dashboard"):s.push(s.asPath===r.Z.SIGN_UP?r.Z.SIGN_UP:r.Z.SIGN_IN),o(!0)},[s]),i)?(0,l.jsx)(e,{...t}):null}}},4560:function(e,t,s){"use strict";s.r(t);var l=s(5893),a=s(6474),n=s(7673),r=s(9881),i=s(6047),o=s(3866),d=s(1789),c=s(7294),u=s(9470),x=s(7048),m=s(1163);t.default=(0,i.Q)(()=>{var e,t;let[s,i]=(0,c.useState)([]),[h,g]=(0,c.useState)(""),[p,b]=(0,c.useState)(!1),[f,v]=(0,c.useState)([]),[j,w]=(0,c.useState)(1),[N,y]=(0,c.useState)(10);console.log("selectedRows: ",f);let[S,_]=(0,c.useState)([]),C=(0,m.useRouter)();(0,c.useEffect)(()=>{P()},[]);let P=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;b(!0);try{let l=JSON.parse(localStorage.getItem("auth_user")).token;console.log(l,"getToken");let a=await (0,u.jk)(l,e,t);if(a){var s;i(null==a?void 0:null===(s=a.data)||void 0===s?void 0:s.data),_(a)}}catch(e){b(!1),console.log("error: ",e)}finally{b(!1)}},k=()=>{var e,t;(null==S?void 0:null===(e=S.data)||void 0===e?void 0:e.hasNextPage)&&(console.log("123"),P(null==S?void 0:null===(t=S.data)||void 0===t?void 0:t.totalPages,N),w(j+1))},E=()=>{var e,t;(null===(e=S.data)||void 0===e?void 0:e.hasPrevPage)&&(P((null==S?void 0:null===(t=S.data)||void 0===t?void 0:t.totalPages)-1,N),w(j-1))},F=async(e,t)=>{console.log("Received item:",e),console.log("Received status:",t),"Delete"===t?(b(!0),swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this discount!",icon:"warning",buttons:!0,dangerMode:!0}).then(async t=>{if(t)try{console.log("userId inside delete condition: ",e._id);let t=JSON.parse(localStorage.getItem("auth_user")),s=await (0,u.OC)(null==t?void 0:t.token,null==e?void 0:e._id);(null==s?void 0:s.success)&&(P(),toast.success("Discount deleted successfully!",{autoClose:2e3}))}catch(e){console.log("error: ",e)}finally{b(!1)}else b(!1)})):C.push({pathname:"addDiscount",query:{item:JSON.stringify(e)}})},D=()=>{C.push("/dashboard/addDiscount")},I=(0,c.useMemo)(()=>[{Header:"Brand Name",accessor:"brandName",disableFilters:!0,filterable:!1,Cell:e=>(0,l.jsxs)("div",{className:"flex items-center whitespace-nowrap text-secondary text-sm gap-2",children:[e.row.original.brandName," "]}),minSize:20},{Header:"Discount",accessor:"discount",disableFilters:!0,filterable:!1,Cell:e=>(0,l.jsxs)("div",{className:"flex items-center whitespace-nowrap text-secondary text-sm gap-2",children:[e.row.original.discount," "]}),minSize:20},{Header:"Description",accessor:"description",disableFilters:!0,filterable:!1,Cell:e=>(0,l.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.description," "]}),minSize:20},{Header:"QR Code",accessor:"qrCode",disableFilters:!0,filterable:!1,Cell:e=>(0,l.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.qrCode," "]}),minSize:20},{Header:"Discount Url",accessor:"discountUrl",disableFilters:!0,filterable:!1,Cell:e=>(0,l.jsxs)("div",{className:"flex items-center text-secondary text-sm gap-2",children:[e.row.original.discountUrl," "]}),minSize:20},{Header:"Brand Logo",accessor:"brandLogo",disableFilters:!0,filterable:!1,Cell:e=>{let{row:t}=e,s=t.original.brandLogo||o.Q5;return(0,l.jsx)("div",{className:"flex items-center text-secondary text-sm gap-2",children:(0,l.jsx)("img",{src:s,alt:t.original.brandName?"".concat(t.original.brandName,"'s Profile"):"Profile",style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"},onError:e=>e.target.src=o.Q5})})},minSize:20},{Header:"",accessor:"action",disableFilters:!0,hideElement:!0,canFilter:!1,Cell:e=>(0,l.jsx)(x.Z,{isEdit:!1,onActionSelect:t=>F(e.row.original,t)}),minSize:5}],[s]);return(0,l.jsxs)(r.Z,{onChange:e=>g(e.target.value),searchValue:h,children:[(0,l.jsx)(a.Z,{loading:p}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex text-[#4D515A] text-sm font-medium",children:["Dashboard ",(0,l.jsx)(d.Ev,{})," Discount ",(0,l.jsx)(d.Ev,{})]}),(0,l.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)("h1",{className:"text-2xl text-secondary font-bold my-3",children:"Discount"}),(0,l.jsx)("button",{className:"mt-4 mr-3 bg-secondary text-white font-bold py-2 px-4 rounded-md hover:bg-secondary-dark transition-colors",onClick:()=>D(),children:"Add Discount"})]}),(0,l.jsx)("div",{className:"mb-5 mt-5 shadow-buttonShadow",children:(0,l.jsx)(n.Z,{currentItems:s,setCurrentItems:i,columns:I,data:s,isAddOptions:!1,customPageSize:6,selectedRows:f,dataName:"Discount",nextPage:()=>k(),previousPage:()=>E(),setPageLimit:e=>{P(1,e,()=>y(e))},canNextPage:null!=S&&null!==(e=S.data)&&void 0!==e&&!!e.hasNextPage,canPreviousPage:null!==(t=S.data)&&void 0!==t&&!!t.hasPrevPage})})]})]})})},3866:function(e,t,s){"use strict";s.d(t,{IV:function(){return l},Q5:function(){return a}});let l=10,a="/icons/profile.jpg"}},function(e){e.O(0,[143,664,521,162,231,888,774,179],function(){return e(e.s=7297)}),_N_E=e.O()}]);